<!doctype HTML>
<html>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/photo-sphere-viewer.min.css"/>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/plugins/markers.css"/>

<script src="https://cdn.jsdelivr.net/npm/three/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/uevent@2/browser.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/photo-sphere-viewer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/plugins/gyroscope.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/plugins/markers.js"></script>
<div id="photosphere"></div>
<script type="text/template" id="earthgod-content">
 <div class="sketchfab-embed-wrapper"> <iframe title="福德祠(趙家巷)" frameborder="0" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" allow="fullscreen; autoplay; vr" xr-spatial-tracking execution-while-out-of-viewport execution-while-not-rendered web-share src="https://sketchfab.com/models/1a04644a7e16481eba8f351d5dfb935c/embed"> </iframe> <p style="font-weight: normal; margin: 5px; color: #4A4A4A;"> <a href="https://skfb.ly/6IwBR" target="_blank" style="font-weight: bold; color: #1CAAD9;"> 福德祠(趙家巷) </a> by <a href="https://skfb.ly/6IwBR" target="_blank" style="font-weight: bold; color: #1CAAD9;"> inaciso </a> </p>
 <p>
趙家世居望廈，據稱是南逃至澳門的宋朝皇裔，挾“父子登科”的大名而鼎足於政、商、文化、教育界。<br><br> 

清朝中葉趙氏家族乘時變革。營地大街中葡貿易交流頻繁，儘管族人憂心該區人煙綢密及火患隱疾，但仍抵不住經濟誘因而遷居趙家巷。及後葡人清拆望廈村、毀墳開路、強徵地租，趙家鄉紳向清廷投訴無門，唯有靠攏葡人。趙家獲邀開賭時卻因顧念家聲而堅守本業，可惜背馳潮流，最終賠上門第破落，剩下趙家大屋對面福德祠的香火，可供憑弔。<br><br>

今日的趙家巷儼如小販巷，叫賣聲遮蓋背後樓房蟻蝕鼠竄的頹相、窄道內輪轉的財貨推湧着挑東揀西的客人。只可憐福德祠土地壇內傳出陣陣霉氣和狗屎味，歷史的無情於此足徵。皇族、士紳、平民，趙家盛極而衰就像越燒越小的塔香，香料全都淪為灰燼，沉沉墮地。不過，土地壇牆上迷宮般的“福壽”迴文並無終點，誰知隱於市井的趙家後人，不日重回繁茂的軌跡？


 </p>
 </div>
</script>
<script type="text/template" id="street-content">
 <div>
 <p>
趙家巷<br><br>

澳門趙氏家族號稱繼承趙宋宗脈，自明末第二十二代定居澳門望廈村起，孝友傳其家，詩書世其業，族中父子曾於清嘉慶年間獲中舉人，使“父子登科”美譽傳頌至今。巷內攤販傳說趙家巷連同福德祠都由富甲一方的趙氏家族興建的，趙家巷葡稱Travessa da Porta早於一八六九年已名列《憲報》，而中文名稱亦載入一九零六年的《澳門街道名冊》內。然而一八一七年趙家名紳趙允菁才舉報趙家巷所在的沿海地區有華洋奸民勾結霸地建屋，此前亦警告過三街火患危急，怎設想半百年後趙氏舉家入主窄巷呢？不過當年大家族置地開街本屬常態，一九一零年輔政司頒行的章程亦要求“如有業主大段地方或已經建有屋宇、或欲建造多數屋宇以為住家之用者，若門口不向大街，後來必須開巷。”一九五零年代趙家在志里興修住宅時順便爲里內十多戶鋪設水電和下水道等公用設施，故此趙家參與興造趙家巷和福德祠之傳說應有所據。趙族聯誼會也選擇福德祠為土地誕消災祈福之地。


 </p>
 </div>
</script>
<div id="viewer"></div>

<style>
  /* the viewer container must have a defined size */
	  #viewer {
		width: 100vw;
		height: 90vh;
	  }
	.psv-notification-content{
		font: 20px sans-serif;
	}
	div#preload { display: none; }
</style>

<script>
  var iH = window.innerHeight/10;	
  var markerArr = [{
					id: 'a1',
					x: 2480,
					y: 1520,
					image: 'https://inaciso.github.io/earthgodar/360/pin-blue.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '福德祠(趙家巷)簡介',
					content: document.getElementById('earthgod-content').innerHTML
					
				},
				{
					id: 'a2',
					x: 4494,
					y: 1520,
					image: 'https://inaciso.github.io/earthgodar/360/pin-blue.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '趙家巷',
					content: document.getElementById('street-content').innerHTML
				},
				{
					id: 'a3',
					x: 3214,
					y: 868,
					image: 'https://inaciso.github.io/earthgodar/360/pin-blue.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '福德祠建築<br>趙家巷福德祠是一座一層一進一開間的瓦頂廟宇，橫批上的燻黑灰塑和瓦脊博古紋裝飾點綴簡樸外觀，麻石門框完全佔據門面橫寬，居中雙掩式吊腳木柵門本已留出一列疏氣口，但為排煙竟被拆去一扇——可見室內濃煙過盛——霧氣、油污、焦灰構成蕭隱匿於市井的神秘空間。',
				},
				{
					id: 'a4',
					x: 2964,
					y: 1968,
					image: 'https://inaciso.github.io/earthgodar/360/pin-red.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '內進福德祠',
					data: {
						go: "b"
					}
				},
				{
					id: 'a5',
					x: 3214,
					y: 868,
					image: 'https://inaciso.github.io/earthgodar/360/pin-blue.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '灰塑<br>灰塑因煙蒸塵封，浮雕“福德祠”三字俱損，背托經折裝書幀圖案亦只能意會，失卻立體骨致之美感。尋常福德祠灰塑多取吉祥寓意，文雅的書卷紋飾帶來私塾氣息，莫非是教育興家的趙氏族人想警醒世人置身鹺腥銅臭陋巷也不能輟學背道？',
				},
				{
					id: 'b1',
					visible: false,
					x: 3830,
					y: 574,
					image: 'https://inaciso.github.io/earthgodar/360/pin-blue.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '亭<br>進入廟門，即見入口麻石門框與神壇兩邊柱子之間竟有橫木相連。沿斑駁的側牆橫木上觀，更會發現橫木之上再層疊橫木，形成屋頂樑架。換言之，福德祠的瓦砌屋頂並非靠磚牆承重，反而採用木樑和石柱支撑，尤如砌築了四壁的中式方亭。趙氏家廟對面的普濟禪院後山亦有眾多方亭被後築牆壁圍成屋宇，與趙家巷福德祠的建築形制相似。由是推之，趙家巷福德祠是從神壇、街亭最終演變成廟宇形式，符合土地神壇普遍的發展模式，亦滿足各代善信的精神需求。',
					
				},
				{
					id: 'b2',
					visible: false,
					x: 3000,
					y: 1500,
					image: 'https://inaciso.github.io/earthgodar/360/pin-blue.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '木神龕<br>神壇前方供桌上置有香爐、燭台和木神龕。木神龕正面精美的木雕隔扇透雕蝙蝠、壽大鳥、熊、花瓶等，蘊藏福壽、英雄和天下太平等豐富寓意，而兩側亦刻有金錢圖案，世俗願求無一遺落。',
					
				},
				{
					id: 'b3',
					visible: false,
					x: 3622,
					y: 2056,
					image: 'https://inaciso.github.io/earthgodar/360/pin-blue.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '清潔功德<br>每逢農曆初一、十五，攤販會義務打掃福德祠，歲晚更會集資維修，連年奉獻竟逾三十載。然而，攤販和街坊不自詡功德，反覺得綿力微弱，愧對於以往梁姓前輩天天親理、出資出力、堅持至終所傳承下來的福德祠。',
				},
				{
					id: 'b4',
					x: 1602,
					y: 1506,
					image: 'https://inaciso.github.io/earthgodar/360/pin-red.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '離開福德祠',
					data: {
						go: "a"
					}
				},
				];
  var viewer = new PhotoSphereViewer.Viewer({
	caption: '福德祠(趙家巷)',
	loadingTxt: "讀取中，請稍候",
	defaultLat: 0.0,
	defaultLong: 0.0,
	defaultZoomLvl: 20,
	touchmoveTwoFingers: true,
	mousewheelCtrlKey: true,
    container: document.querySelector('#viewer'),
    panorama: 'https://inaciso.github.io/earthgodar/360/360_3_a.jpg',
	
	plugins: [PhotoSphereViewer.GyroscopePlugin,
		
		[PhotoSphereViewer.MarkersPlugin, {
			markers: markerArr,
		}]
	],
		navbar: [
		'autorotate',
		'zoom',
		'caption',
		'fullscreen'
		
	],
	lang: {
		autorotate: '自動旋轉',
		zoom      : '𦂨放',
		zoomOut   : '放大',
		zoomIn    : '縮小',
		download  : '下載',
		fullscreen: '全屏模式',
		menu      : '選單',
		twoFingers: '請使用兩指來導覽',
		ctrlZoom  : '請使用ctrl和滾輪來縮放圖片',
		loadError : '讀取錯誤:(',
		gyroscope : '啟用陀螺儀',
	}
  });
  
  const markersPlugin = viewer.getPlugin(PhotoSphereViewer.MarkersPlugin);
	var gyro = viewer.getPlugin(PhotoSphereViewer.GyroscopePlugin);
	
	
	markersPlugin.on('select-marker', function(e, marker, data) {
		if(marker.data ){
			viewer.animate({
				  //longitude: marker.config.longitude,
				  //latitude: marker.config.latitude,
				  zoom: 100,
				  speed: "-3rpm",
			})
			.then(() => {
				
				if(marker.data.go=="a"){
					viewer.setPanorama('https://inaciso.github.io/earthgodar/360/360_3_a.jpg', { longitude: 6.232589417434965, latitude: 0.07016253709436304 }, true);
				}else if(marker.data.go=="b"){
					viewer.setPanorama('https://inaciso.github.io/earthgodar/360/360_3_b.jpg', { longitude: 6.02, latitude: 0 }, true);
				}
				for (var i=0; i<markerArr.length ; i++){
					const mStr = markerArr[i].id;
					console.log("mStr: "+mStr);
					if(mStr.charAt(0)  == marker.data.go){
						markersPlugin.showMarker(mStr);
					}else{
						markersPlugin.hideMarker(mStr);
					}
				}
				});
			
		}else{
			const textContent = marker.tooltip.content.innerText;
			//console.log("textContent: "+ textContent);
			viewer.notification.show({
				content: textContent,
				timeout: 3000,
			});
		}
	});
</script>

<script>
/*function myFunction(){
		
		var btn = document.getElementById('gyro');
		var gyro = viewer.getPlugin(PhotoSphereViewer.GyroscopePlugin);
		//gyro.start();
		console.log('gyro: '+gyro+ ", btn: "+ btn);
			

		if (!gyro) {
		  console.log('gyro unavailable?');
		} else if (typeof gyro.isEnabled === 'function') {
		  console.log('gyro.isEnabled():', gyro.isEnabled());
		} else {
		  console.log('no isEnabled fn found?');
		}
		  
		
	};*/
</script>

<div id="preload">
   <img src="https://inaciso.github.io/earthgodar/360/pin-blue.png" width="1" height="1" alt="Image 01" />
   <img src="https://inaciso.github.io/earthgodar/360/360_2_1.jpg" width="1" height="1" alt="Image 02" />
   
</div>
 <!--<button id="gyro"  onclick="myFunction()">
      gyro tester
    </button>-->

</html>