<!doctype HTML>
<html>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/photo-sphere-viewer.min.css"/>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/plugins/markers.css"/>

<script src="https://cdn.jsdelivr.net/npm/three/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/uevent@2/browser.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/photo-sphere-viewer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/plugins/gyroscope.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@4/dist/plugins/markers.js"></script>
<div id="viewer"></div>

<style>
  /* the viewer container must have a defined size */
  #viewer {
    width: 100vw;
    height: 90vh;
  }
  #gyro {
      position: fixed;
      top: 30px;
      left: 30px;
      padding: 20px;
      z-index: 2;
   }
</style>

<script>
  var iH = window.innerHeight/10;	
  var viewer = new PhotoSphereViewer.Viewer({
	caption: '近蓮社(道咩卑利士街)',
	defaultLat: 0.3,
	touchmoveTwoFingers: true,
	mousewheelCtrlKey: true,
    container: document.querySelector('#viewer'),
    panorama: 'https://inaciso.github.io/earthgodar/360/360_1.jpg',
	plugins: [
		PhotoSphereViewer.GyroscopePlugin,
		[PhotoSphereViewer.MarkersPlugin, {
			markers: [{
					id: 'm1',
					x: 550,
					y: 1369,
					image: 'https://inaciso.github.io/earthgodar/360/pin-blue.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '近蓮社',
					
				},
				{
					id: 'm2',
					x: 4625,
					y: 1138,
					image: 'https://inaciso.github.io/earthgodar/360/pin-blue.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '位置隱秘，只能從菜攤的小巷楔入',
				},
				{
					id: 'm3',
					x: 3465,
					y: 1210,
					image: 'https://inaciso.github.io/earthgodar/360/pin-blue.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '土地公面朝道咩卑利士街公厠的背牆',
				},
				{
					id: 'm4',
					x: 610,
					y: 1952,
					image: 'https://inaciso.github.io/earthgodar/360/pin-blue.png',
					width: iH,
					height: iH,
					anchor: 'bottom center',
					tooltip: '香火旺盛，可見有不少識途的街坊信眾',
			}]
		}]
	],
		navbar: [
		'autorotate',
		'zoom',
		'caption',
		'fullscreen'
	]
  });
  
  const markersPlugin = viewer.getPlugin(PhotoSphereViewer.MarkersPlugin);
  var btn = document.querySelector('#gyro');

    if (btn) {
      btn.addEventListener('click', function onClick() {
        var gyro = viewer.getPlugin(PhotoSphereViewer.GyroscopePlugin);

        if (!gyro) {
          console.log('gyro unavailable?');
        } else if (typeof gyro.isEnabled === 'function') {
          console.log('gyro.isEnabled():', gyro.isEnabled());
        } else {
          console.log('no isEnabled fn found?');
        }
      });
    }
</script>
<body>
  <div id="viewer">
    <button id="gyro">
      Toggle Gyro
    </button>
  </div>
</body>
</html>